(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,a){e.exports=a(45)},38:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),i=a(21),s=(a(38),a(8)),o=a(2),u=a(16),d=a(10),m=a(11),h=a(5),p=a(13),b=a(12),E=a(17),v=a.n(E),f=a(22),g=function(){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))},j=function(e){return{type:"REQUEST_SUCCESS",currencies:e}},y=function(){return function(){var e=Object(f.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REQUEST_START"}),e.next=4,g();case 4:a=e.sent,t(j(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"REQUEST_FAIL",error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={email:"",password:"",disabled:!0,login:!1},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.handleClick=e.handleClick.bind(Object(h.a)(e)),e.loginValidation=e.loginValidation.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"handleClick",value:function(){var e=this.props.handleEmail,t=this.state.email;this.setState({login:!0}),e(t)}},{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(u.a)({},n,r),(function(){t.loginValidation()}))}},{key:"loginValidation",value:function(){var e,t=this.state,a=t.email,n=t.password;e=!(/^[\w]+@([\w]+\.)+[\w]{2,4}$/gi.test(a)&&n.length>=6),this.setState({disabled:e})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.disabled,c=e.login;return r.a.createElement("main",{className:"login-main"},r.a.createElement("header",{className:"login-header"},r.a.createElement("h1",null,"Trybe Wallet")),r.a.createElement("form",{className:"login-form"},r.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleChange,"data-testid":"email-input",placeholder:"user@email.com",className:"login-input"}),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange,"data-testid":"password-input",placeholder:"******",className:"login-input"}),r.a.createElement("button",{type:"submit",disabled:n,onClick:this.handleClick,className:"login-btn"},"Entrar")),c?r.a.createElement(o.a,{to:"/carteira"}):"")}}]),a}(r.a.Component),C=Object(s.b)(null,(function(e){return{handleEmail:function(t){return e(function(e){return{type:"EMAIL",payload:e}}(t))}}}))(O),x=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).getTotalExpenses=e.getTotalExpenses.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"getTotalExpenses",value:function(){return this.props.expenses.reduce((function(e,t){var a=t.value,n=t.currency,r=t.exchangeRates,c=parseFloat(r[n].ask);return e+parseFloat(a)*c}),0).toFixed(2)}},{key:"render",value:function(){var e=this.props.email;return r.a.createElement("header",{className:"wallet-header"},r.a.createElement("h1",null,"Trybe Wallet"),r.a.createElement("p",{"data-testid":"email-field",className:"wallet-email"},"E-mail: ".concat(e)),r.a.createElement("div",{className:"wallet-total-value"},r.a.createElement("span",{"data-testid":"total-field"},"Despesa Total: R$ ".concat(this.getTotalExpenses()," ")),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}}]),a}(r.a.Component),k=Object(s.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(x);x.defaultProps={expenses:[]};var w=a(3),S={value:"0",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",id:0},T=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state=Object(w.a)({},S),e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.handleClick=e.handleClick.bind(Object(h.a)(e)),e.renderInput=e.renderInput.bind(Object(h.a)(e)),e.renderSelect=e.renderSelect.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(u.a)({},t.name,t.value))}},{key:"handleClick",value:function(){var e=Object(f.a)(v.a.mark((function e(t){var a,n,r,c,l,i,s,o,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state,n=a.value,r=a.description,c=a.currency,l=a.method,i=a.tag,s=a.id,o=this.props.saveExpense,e.next=5,g();case 5:u=e.sent,o({id:s,value:n,description:r,currency:c,method:l,tag:i,exchangeRates:u}),this.setState(Object(w.a)(Object(w.a)({},S),{},{id:s+1}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderInput",value:function(e,t,a,n){return r.a.createElement("label",{htmlFor:"".concat(a,"-input")},"".concat(e,": "),r.a.createElement("input",{type:t,id:"".concat(a,"-input"),name:a,"data-testid":"".concat(a,"-input"),onChange:this.handleChange,value:n,className:"".concat(a,"-input")}))}},{key:"renderSelectCurrencies",value:function(e,t){var a=this.props.currencies;return r.a.createElement("select",{id:"currency-input",name:"currency","data-testid":"currency-input",onChange:t,value:e,className:"currency-input"},a.map((function(e){return"USDT"===e?"":r.a.createElement("option",{key:e,"data-testid":e},e)})))}},{key:"renderSelect",value:function(e,t,a,n){return r.a.createElement("label",{htmlFor:"".concat(t,"-input")},"".concat(e,": "),r.a.createElement("select",{id:"".concat(t,"-input"),name:t,"data-testid":"".concat(t,"-input"),onChange:this.handleChange,value:a},n.map((function(e){return r.a.createElement("option",{key:e},e)}))))}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,c=e.method,l=e.tag;return r.a.createElement("form",{className:"new-expense-form"},r.a.createElement("label",{htmlFor:"currency-input"},"Moeda: ",this.renderSelectCurrencies(n,this.handleChange)),this.renderInput("Valor","number","value",t),this.renderInput("Descri\xe7\xe3o","text","description",a),this.renderSelect("Tag","tag",l,["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"]),this.renderSelect("M\xe9todo de pagamento","method",c,["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"]),r.a.createElement("button",{type:"submit",onClick:this.handleClick,className:"expense-btn add-expense"},"Adicionar despesa"))}}]),a}(r.a.Component),N=Object(s.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{fetchCurrencies:function(){return e(y())},saveExpense:function(t){return e({type:"SAVE_EXPENSE",expenses:t})}}}))(T);T.defaultProps={currencies:[]};var R=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.expenses;return r.a.createElement("table",null,r.a.createElement("thead",{className:"table-header"},r.a.createElement("tr",null,r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",{className:"table-body"},e.map((function(e,t){var a=e.description,n=e.tag,c=e.method,l=e.value,i=e.currency,s=e.exchangeRates[i],o=s.name,u=s.ask;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,o),r.a.createElement("td",null,l),r.a.createElement("td",null,parseFloat(u).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,(u*parseInt(l,10)).toFixed(2)),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,c))}))))}}]),a}(r.a.Component),F=Object(s.b)((function(e){return{expenses:e.wallet.expenses}}))(R);R.defaultProps={expenses:[]};var A=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrencies)()}},{key:"render",value:function(){return r.a.createElement("main",{className:"wallet-main"},r.a.createElement(k,null),r.a.createElement(N,null),r.a.createElement(F,null))}}]),a}(r.a.Component),I=Object(s.b)(null,(function(e){return{fetchCurrencies:function(){return e(y())}}}))(A);var D=function(){return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/carteira",component:I}),r.a.createElement(o.b,{exact:!0,path:"/wallet",component:C}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(14),M=a(31),V=a(32),_={email:""};var P=a(27),L={currencies:[],expenses:[]};var Q=Object(U.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EMAIL":return Object(w.a)(Object(w.a)({},e),{},{email:t.payload});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_START":return Object(w.a)(Object(w.a)({},e),{},{isFetching:!0});case"REQUEST_SUCCESS":return Object(w.a)(Object(w.a)({},e),{},{isFetching:!1,currencies:Object(P.a)(Object.keys(t.currencies))});case"REQUEST_FAIL":return Object(w.a)(Object(w.a)({},e),{},{isFetching:!1,error:t.error});case"SAVE_EXPENSE":return Object(w.a)(Object(w.a)({},e),{},{expenses:[].concat(Object(P.a)(e.expenses),[t.expenses])});default:return e}}}),W=Object(U.createStore)(Q,Object(M.composeWithDevTools)(Object(U.applyMiddleware)(V.a)));l.a.render(r.a.createElement(i.a,null,r.a.createElement(s.a,{store:W},r.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.7ebb35e5.chunk.js.map